

\documentclass[11pt, oneside]{article}   	% use "amsart" instead of "article" for AMSLaTeX format
\usepackage{geometry}                		% See geometry.pdf to learn the layout options. There are lots.
\geometry{letterpaper}                   		% ... or a4paper or a5paper or ... 
%\geometry{landscape}                		% Activate for rotated page geometry
\usepackage[parfill]{parskip}    		% Activate to begin paragraphs with an empty line rather than an indent
\usepackage{graphicx}				% Use pdf, png, jpg, or epsÂ§ with pdflatex; use eps in DVI mode
								% TeX will automatically convert eps --> pdf in pdflatex		
\usepackage{amssymb}
\usepackage{amsmath} 
\usepackage{bm}
\usepackage{xcolor}
\usepackage{bbm}
\usepackage{bbold}
\usepackage[T1]{fontenc}

\usepackage[english]{babel}
\newtheorem{theorem}{Theorem}
\newtheorem{corollary}{Corollary}[theorem]
\newtheorem{lemma}[theorem]{Lemma}

%SetFonts

%SetFonts


\title{}
\author{}
\date{}							% Activate to display a given date or no date

\begin{document}
\maketitle
\section{General Notations}

\begin{itemize}

	\item {$N$: Number of users}
	
	\item {$n$: Number of items,    $
	n = \left \{
	\begin{aligned}
	&2m-1, && \text{if n is odd} \\
	&2m, && \text{otherwise}
	\end{aligned} \right.
	$}
	
	\item {$\bm{R}^1,...,\bm{R}^N$: full rankings given by the users}
	
	
	\item {$\bm{R}^j$ = \{$R^j_1,...,R^j_n,$\} $\sim$ Mallows($\bm{\rho}^0, \alpha^0$)}
	
	
	\item {$P(\bm{\rho}|\bm{R}^1,...,\bm{R}^N,\alpha^o)$: Mallows posterior}
	
	
	\item{\{$i_1, ..., i_n$\}: a ranking of $n$ items that determines the sequence following which the items are to be sampled. i.e. $i_j = k$ indicates that item $j$ is the k-th item is to be sampled}
	
	\item{ \{$o_1, ..., o_n$\}: an ordering of $n$ items that corresponds to \{$i_1, ..., i_n$\} s.t. $i_{o_k} = k$ }. $\{o_1, ...,o_n\}$ and \{$i_1, ..., i_n$\} have a one-to-one relationship
	
	%pseudo components 
	\item {$\sum\limits_{\{i_1, ..., i_n \}\in \mathcal{P}_n }q(\tilde{\bm{\rho}}|i_1, ..., i_n, \alpha_0, \bm{R}^1, ...,\bm{R}^N) \cdot g(i_1, ..., i_n| \dots)$ : pseudolikelihood that approxiamtes the Mallows posterior}
	
	\item {$q(\tilde{\bm{\rho}}|i_1, ..., i_n, \alpha^0, \bm{R}^1, ..., \bm{R}^N) \\
		=q(\tilde{\rho}_{o_1}|\alpha^0,o_1, R^1_{o_1},...,R^N_{o_1}) \cdot
		q(\tilde{\rho}_{o_2}|\alpha^0,o_2,\tilde{\rho}_{o_1} R^1_{o_2},...,R^N_{o_2}) \cdot
		... \cdot \\
		q(\tilde{\rho}_{o_{n-1}}|\alpha^0,o_{n-1}, \tilde{\rho}_{o_1},...,\tilde{\rho}_{o_{n-2}}, R^1_{n-1},...,R^N_{n-1}) \cdot
		q(\tilde{\rho}_{o_{n}}|\alpha^0,o_{n}, \tilde{\rho}_{o_1},...,\tilde{\rho}_{o_{n-1}}, R^1_n, ..., R^N_n)$}
	\begin{itemize}
	\item{	$ {q(\tilde{\rho}_{o_1}|\alpha^0, o_1,R^1_{o_1}, ...,R^N_{o_1}) }
	= \frac{\text{exp}\{- \frac{\alpha_0}{n}\sum\limits_{j=1}^{N}d(R^j_{o_1}, \tilde{\rho}_{o_1})\}\mathbb{1}_{\tilde{\rho}_{o_1}\in \{1, ...,n\}}}
	{\sum\limits_{\tilde{r}_{o_1}\in \{1, .., n\}}\text{exp}\{- \frac{\alpha_0}{n}\sum\limits_{j=1}^{N}d(R^j_{o_1}, \tilde{r}_{o_1})\}} $}

\item{
	$ {q(\tilde{\rho}_{o_k}|\alpha^0, o_k, \tilde{\rho}_{o_1}, ..., \tilde{\rho}_{o_{k-1}},R^1_{o_k}, ...,R^N_{o_k}) }
	= \frac{\text{exp}\{- \frac{\alpha_0}{n}\sum\limits_{j=1}^{N}d(R^j_{o_k}, \tilde{\rho}_{o_k})\}\mathbb{1}_{\tilde{\rho}_{o_k}\in\{1, .., n\}\textbackslash \{\tilde{\rho}_{o_1}, ..., \tilde{\rho}_{o_{k-1}}\}}}
	{\sum\limits_{\tilde{r}_{o_k}\in \{1, .., n\}\textbackslash \{\tilde{\rho}_{o_1}, ..., \tilde{\rho}_{o_{k-1}}\}}\text{exp}\{- \frac{\alpha_0}{n}\sum\limits_{j=1}^{N}d(R^j_{o_k}, \tilde{r}_{o_k})\}} $} for $k = 2, ..., n$

	\end{itemize}

	\item{ $\bm{\rho}^0 \leftrightarrow \bm{o}^0$ s.t. ${{\rho}^0}^{-1}(m) = o^0_m$}
	
	
	\item{Define the ``v-function'' $f_v(\cdot)$ such that $f_v(\bm{\rho}^0)$ = $\mathcal{V}_{\bm{\rho}^0}$}, where 
	\begin{itemize}
			\item{ $\mathcal{V}_{\bm{\rho}^o}$ = $
			\left \{ 
			\begin{aligned}
			&\{\bm{r}\in \mathcal{P}_n: r_{o^0_m}=1, r_{o^0_{m\pm k}} \in \{2k, 2k+1 \}, k = 1, ..., m-1 \}, && \text{if n is odd} \\
			&\{\bm{r}\in \mathcal{P}_n: \{r_{o^0_{m-k}},r_{o^0_{m+k+1}} \} \in \{2k+1, 2k+2 \}, k = 0, ..., m \}, && \text{if n is even} 
			\end{aligned} \right.
			$
		}
	\end{itemize}


\end{itemize}

\section{Theorems and Lemmas}

\begin{lemma}
Given there are odd number of items, i.e. $n = 2m - 1$. $\forall \alpha^0 \in (0, \infty)$,

	\begin{enumerate} 
		\item{$\mathbb{E}(R_{o^0_m}|\bm{\rho}_{0}, \alpha^0) = \rho^0_m = m$ }
		\item{$\forall j \in [1, m-2]$, $j< \mathbb{E}[R_{o^0_j}|\bm{\rho}^0, \alpha^0] <\mathbb{E}[R_{o^0_{j+1}}|\bm{\rho}^0, \alpha^0] < m$}
		\item{$\forall j \in [m+2, 2m-1]$, $m< \mathbb{E}[R_{o^0_{j-1}}|\bm{\rho}^0, \alpha^0] <\mathbb{E}[R_{o^0_{j}}|\bm{\rho}^0, \alpha^0] < j$}
	\end{enumerate}
Similarly, if $n$ is even, i.e. $n = 2m$,  $\forall \alpha^0 \in (0, \infty)$,
	\begin{enumerate} 
	\item{$\forall j \in [1, m-1]$, $j< \mathbb{E}[R_{o^0_j}|\bm{\rho}^0, \alpha^0] <\mathbb{E}[R_{o^0_{j+1}}|\bm{\rho}^0, \alpha^0]$}
	\item{$\forall j \in [m+2, 2m]$, $\mathbb{E}[R_{o^0_{j-1}}|\bm{\rho}^0, \alpha^0] <\mathbb{E}[R_{o^0_{j}}|\bm{\rho}^0, \alpha^0] < j$}
\end{enumerate}
Note that for both cases, it satisfies that $\forall 1\leq j<k\leq n$ and $\forall \alpha > 0 $,
{$\mathbb{E}[R_{j}|\bm{\rho}^0, \alpha^0]<\mathbb{E}[R_{k}|\bm{\rho}^0, \alpha^0]$}
\end{lemma}

\begin{lemma}
 As $N \rightarrow \infty$, $\frac{1}{N}\sum\limits_{j=1}^{N}R^j_i $
\end{lemma}

\begin{theorem}
	Let $f$ be a function whose derivative exists in every point, then $f$ 
	is a continuous function.

\end{theorem}

As $N \rightarrow \infty$, $\bm{\rho}^0 \rightarrow rank(\mathbb{E}[{R}_1],...,\mathbb{E}[{R}_n]) \rightarrow rank({1\over N}\sum\limits_{j=0}^{N}R_1^j,...,{1\over N}\sum\limits_{j=0}^{N}R_n^j)$

It is proven that $\mathbb{E}[R_{o^0_j}] < \mathbb{E}[R_{o^0_k}] \text{ }\forall j<k \text{ and } \alpha^0 >0 $. Therefore, as the number of users $N \rightarrow \infty$, the exact value of $\bm{\rho}^0$ can be inferred from the data by taking the marginal mean of each item and rank them according to the marginal means.

\section{Theorem 1}
$\lim\limits_{N \rightarrow \infty}$ $\operatorname*{arg\,min}\limits_{g\in\mathcal{D}_{\bm{\rho}^0}} KL (P(\bm{\rho}|\alpha^0, \bm{R}^1, ...,\bm{R}^N ) || \sum\limits_{\{i_1,..., i_n\} \in \mathcal{P}_n} q (\tilde{\bm{\rho}}|\alpha^0, \bm{R}^1,..., \bm{R}^N, i_1,...,i_n) g(i_1,...,i_n|\bm{\rho}^0)$ \\
= $g^*(i_1,...,i_n|\mathcal{V}_{{\bm{\rho}}^0})$, \\ 
where 
\begin{itemize}
	\item{
		$\mathcal{D}_{\bm{\rho}^0}$ is a set of all distrbutions on the space of permutation $\mathcal{P}_n, \text{which depends on } \bm{\rho}^0$, i.e., $\mathcal{D}_{\bm{\rho}^0} $=\{\textcolor{red}{what is a good notation of this??\} } 
	}
	\item{
		$g^*(i_1, ..., i_n | \mathcal{V}_{\bm{\rho}^0})$ is a distribution whose density is concentrated on $\bm{\rho}^0$, i.e. \\
		  $
		\left \{
		\begin{aligned}
		&g^*(i_1, ..., i_n | \mathcal{V}_{\bm{\rho}^0}) = |\mathcal{V}_{\bm{\rho}^0}|^{-1}>0 , && \text{if} \{i_1,...,i_n\}\in \mathcal{V}_{\bm{\rho}^0}\\
		&g^*(i_1, ..., i_n | \mathcal{V}_{\bm{\rho}^0}) = 0 , && \text{if} \{i_1,...,i_n\}\notin \mathcal{V}_{\bm{\rho}^0}
		\end{aligned} \right.
		$	
	}

\end{itemize}

explanation: for a set of distributions $g$, which are defined the space of permutation of $n$ items, i.e.$\mathcal{P}_n$, the distribution $g^*$ that minimizes the KL-divergence betweeeh the Mallows posterior and the pseudolikelihood defined above, is a uniform distribution with its density concentrated on $\mathcal{V}_{\bm{\rho}^o}$

\section{Theorem 2}
For a given $N < \infty$, $\hat{\bm{\rho}}^0$ is defined as $rank({1\over N}\sum\limits_{j=0}^{N}R_1^j, ..., {1\over N}\sum\limits_{j=0}^{N}R_n^j)$. $\hat{\bm{\rho}}^0 \neq \bm{\rho}^0$. The corresponding ``$\mathcal{V}$-like'' set is notated as $\mathcal{V}_{\hat{\bm{\rho}}^0}$.

$\exists\sigma \geq 0$,

 KL $(P(\bm{\rho}|\alpha^0, \bm{R}^1, ...,\bm{R}^N ) || \sum\limits_{\{i_1,..., i_n\} \in \mathcal{P}_n} q (\tilde{\bm{\rho}}|\alpha^0, \bm{R}^1,..., \bm{R}^N, i_1,...,i_n) g^{*}(i_1,...,i_n|\mathcal{V}_{\hat{\bm{\rho}}^0)}\geq $\\
 KL $(P(\bm{\rho}|\alpha^0, \bm{R}^1, ...,\bm{R}^N ) || \sum\limits_{\{i_1,..., i_n\} \in \mathcal{P}_n} q (\tilde{\bm{\rho}}|\alpha^0, \bm{R}^1,..., \bm{R}^N, i_1,...,i_n) g'(i_1,...,i_n|\mathcal{V}_{\hat{\bm{\rho}}^0}, \sigma)\geq $\\
 $\lim\limits_{N\rightarrow \infty}$KL $(P(\bm{\rho}|\alpha^0, \bm{R}^1, ...,\bm{R}^N ) || \sum\limits_{\{i_1,..., i_n\} \in \mathcal{P}_n} q (\tilde{\bm{\rho}}|\alpha^0, \bm{R}^1,..., \bm{R}^N, i_1,...,i_n) g^{*}(i_1,...,i_n|{\mathcal{V}_{\bm{\rho}^0}}), $\\
 where 
 \begin{itemize}
 	\item {$\hat{\bm{v}} \sim \mathcal{U} (\hat{\bm{v}}|\mathcal{V}_{\hat{\rho_{0}}})$}
  	\item {$i_i'\sim \mathcal{N}(i_i'|\hat{v}_i, \sigma)$} for $i = 1,...,n $
 	\item {$i_1, ..., i_n = rank(i_1', ..., i_n')$},
 \end{itemize}
and
 	$g'(i_1, ..., i_n|\mathcal{V}_{\hat{\bm{\rho}}^0}) = \sum\limits_{\hat{\bm{v}}\in \mathcal{V}_{\hat{\bm{\rho}}^0}} \mathcal{U} (\hat{\bm{v}}|\mathcal{V}_{\hat{\bm{\rho}}^{0}})\prod\limits_{i=1}^{n}\mathcal{N}(i_i'|\hat{v}_i, \sigma)\cdot {1}$
 	
% \end{itemize}
 
 Explanation: as $N$ is limited, $\bm{\rho}^0$, and therefore, $\mathcal{V}_{\bm{\rho}^0}$ cannot be accurately inferred from the data. We can however, sample for $i_1, ..., i_n$ by sampling for each item $i$ from a univariate Gaussian distribution centred on $\hat{v}_i$ with a fixed variance $\sigma$ for all items, and then rank the resulting ``scores'' to convert it back to rankings. By doing so, we can achieve a smaller KL divergence to the Mallows posterior, compared to not introducing the Gaussian noise.
 
\section{Theorem 3}
 $
\sigma = \left \{
\begin{aligned}
&0, && \text{if } \delta(\alpha,n,N)\leq \delta ^{*} \\
&f(\alpha, n,N), && \text{otherwise}
\end{aligned} \right.
$

Explanation: With the usage of $g'(i_1, ...,i_n|\mathcal{V}_{\hat{\bm{\rho}}^0})$, the value of $\sigma$ which minimizes the KL-divergence between the Mallows posterior and the resulted Pseudolikelihood should be 0 when $\delta(\alpha,n,N) \geq \delta^*$. Beyond this point, the optimal choice of $\sigma$ should be greater than 0, and it follows a function $f(\alpha,n,N)$

\section{Theorem 4}
as $N \rightarrow \infty,\delta^{*} \rightarrow \text{max}\delta(\alpha,n,N) $, $\forall \alpha >0, n\geq 1$
\end{document}  